{% extends "hospital_app/base.html" %}
{% block title %}Appointments{% endblock %}
{% block content %}
<h2>Appointments</h2>
<form method="get" class="d-flex mb-3">
  <input name="q" value="{{ query }}" class="form-control me-2" placeholder="Search by patient name">
  <button class="btn btn-primary">Search</button>
</form>
<a href="{% url 'add_appointment' %}" class="btn btn-success mb-3">+ Add Appointment</a>

<table class="table table-striped bg-white">
<thead class="table-warning"><tr><th>Patient</th><th>Doctor</th><th>Date</th><th>Diagnosis</th><th>Actions</th></tr></thead>
<tbody>
{% for a in appointments %}
<tr>
  <td>{{ a.patient.name }}</td>
  <td>{{ a.doctor.name }}</td>
  <td>{{ a.appointment_date }}</td>
  <td>{{ a.diagnosis }}</td>
  <td>
    <a href="{% url 'edit_appointment' a.id %}" class="btn btn-warning btn-sm">Edit</a>
    <a href="{% url 'delete_appointment' a.id %}" class="btn btn-danger btn-sm">Delete</a>
  </td>
</tr>
{% empty %}
<tr><td colspan="5" class="text-center">No appointments.</td></tr>
{% endfor %}
</tbody>
</table>

<nav><ul class="pagination">
  {% if appointments.has_previous %}<li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ appointments.previous_page_number }}">Previous</a></li>{% else %}<li class="page-item disabled"><span class="page-link">Previous</span></li>{% endif %}
  <li class="page-item active"><span class="page-link">{{ appointments.number }} / {{ appointments.paginator.num_pages }}</span></li>
  {% if appointments.has_next %}<li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ appointments.next_page_number }}">Next</a></li>{% else %}<li class="page-item disabled"><span class="page-link">Next</span></li>{% endif %}
</ul></nav>
{% endblock %}
