{% extends "hospital_app/base.html" %}
{% block title %}Patients{% endblock %}
{% block content %}
<h2>Patients</h2>
<form method="get" class="d-flex mb-3">
  <input name="q" value="{{ query }}" class="form-control me-2" placeholder="Search patient by name">
  <button class="btn btn-primary">Search</button>
</form>
<a href="{% url 'add_patient' %}" class="btn btn-success mb-3">+ Add Patient</a>

<table class="table table-striped bg-white">
<thead class="table-success"><tr><th>Name</th><th>Gender</th><th>DOB</th><th>Phone</th><th>Actions</th></tr></thead>
<tbody>
{% for p in patients %}
<tr>
  <td>{{ p.name }}</td>
  <td>{{ p.gender }}</td>
  <td>{{ p.dob|date:"d M, Y" }}</td>
  <td>{{ p.phone }}</td>
  <td>
    <a href="{% url 'edit_patient' p.id %}" class="btn btn-warning btn-sm">Edit</a>
    <a href="{% url 'delete_patient' p.id %}" class="btn btn-danger btn-sm">Delete</a>
  </td>
</tr>
{% empty %}
<tr><td colspan="5" class="text-center">No patients.</td></tr>
{% endfor %}
</tbody>
</table>

<nav><ul class="pagination">
  {% if patients.has_previous %}<li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ patients.previous_page_number }}">Previous</a></li>{% else %}<li class="page-item disabled"><span class="page-link">Previous</span></li>{% endif %}
  <li class="page-item active"><span class="page-link">{{ patients.number }} / {{ patients.paginator.num_pages }}</span></li>
  {% if patients.has_next %}<li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ patients.next_page_number }}">Next</a></li>{% else %}<li class="page-item disabled"><span class="page-link">Next</span></li>{% endif %}
</ul></nav>
{% endblock %}
